setCurrentView(VIEWS.MAIN); // Fallback
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  case VIEWS.LOADING:
Â  Â  Â  Â  Â  Â  Â  Â  default:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  appContent.innerHTML = renderLoadingScreen();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  // Render the loading screen
Â  Â  Â  Â  const renderLoadingScreen = () => {
Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center p-16 flex flex-col items-center justify-center h-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="loader !w-12 !h-12 !border-8"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xl text-stride-primary font-semibold mt-4">Loading Stride & Stroller...</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  };

Â  Â  Â  Â  // Render the initial user setup screen
Â  Â  Â  Â  const renderSetupScreen = () => {
Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="max-w-md mx-auto bg-white p-8 rounded-xl shadow-lg mt-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold text-center text-stroller-accent mb-6">ðŸ‘‹ Welcome!</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-gray-600 text-center mb-6">Before you join a walk, please set up your profile.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form id="setup-form" onsubmit="event.preventDefault(); createProfile();">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="userName" class="block text-gray-700 font-medium mb-2">Your Name/Nickname</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="userName" name="userName" required
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="w-full p-3 border border-gray-300 rounded-lg focus:ring-stroller-accent focus:border-stroller-accent"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="e.g., Jane D. or The Stroller Dad">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="userTimezone" class="block text-gray-700 font-medium mb-2">Your Timezone</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="userTimezone" name="userTimezone" required
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="w-full p-3 border border-gray-300 rounded-lg focus:ring-stroller-accent focus:border-stroller-accent">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${TIMEZONES.map(tz => `<option value="${tz}" ${tz === 'America/New_York' ? 'selected' : ''}>${tz.replace('America/', '').replace('_', ' ')}</option>`).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" id="setup-submit-btn" class="w-full bg-stride-primary text-white p-3 rounded-lg font-semibold hover:bg-green-600 transition duration-150">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${isSaving ? '<span class="loader !w-4 !h-4 !border-2 !border-t-white"></span> Saving...' : 'Complete Setup'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  };

Â  Â  Â  Â  // Function to save the new user profile
Â  Â  Â  Â  async function createProfile() {
